language: node_js

node_js:
- "0.10"

env:
  global:
    secure: MkYSvOdrIXqcO5JNl/NRQSmShIQVfzXA4lmDCtwCQ+LNoIEO1qt+qJSPL654eqzVt75RAL/vSLIrPb4i/MMRvbTzkrpDiM45bbmouWV29amIFEaF05/Q7Fi7EoLcoZ3l8jUxB9rLAHUHkcEkc4BQdioAsq/JdF2FsfgN0Mz5h/c=

before_install:
- echo "Before install stage"

install:
- echo "Install stage"
- npm -g install cordova ionic bower gulp cordova-gen
- npm install
- bower install

before_script:
- echo "Before script stage"

script:
- echo "Script stage"
- npm test

after_success:
- curl https://raw.githubusercontent.com/GochoMugo/ionic-ci-script/master/prepare-debian-ubuntu.sh -O
- sudo source prepare-debian-ubuntu.sh
- ionic platform add android
- ionic build android
- sudo pip install -r ci-requirements.txt
- '[ ${TRAVIS_BRANCH} == "develop" ] && python ci-release.py'

after_failure:
- echo "After failure stage"

after_script:
- echo "After script stage"
